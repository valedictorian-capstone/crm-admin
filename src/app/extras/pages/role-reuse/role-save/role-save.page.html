<nb-card style="position: relative;" [class.inside]="inside">
    <ngx-spinner [name]="'role-save'" bdColor="#e5e5e5" [style.opacity]="'0.8'" [zIndex]="999" size="medium" color="#3de2ab" type="ball-clip-rotate-multiple" [fullScreen]="false"></ngx-spinner>
    <nb-card-header *ngIf="!inside" style="background: #f7f7f7; border-bottom: 1px solid #e5e5e5;">
        {{role ? 'Edit' : 'New'}} Role
        <button (click)="useClose.emit()" style="float:right" nbButton size="tiny">
<nb-icon icon="close"></nb-icon>
</button>
    </nb-card-header>
    <nb-card-body [formGroup]="form">
        <span style="display: block; margin-bottom: 0.5rem; font-weight: 600" [class.text-danger]="
  form.get('name').invalid &&
  (form.get('name').touched || form.get('name').dirty)
">Name <span class="text-danger">*</span></span>
        <nb-form-field style="width: 100%; margin-bottom: 1rem">
            <nb-icon icon="pin-outline" nbPrefix></nb-icon>
            <input [status]="
      form.get('name').invalid &&
      (form.get('name').touched || form.get('name').dirty) ? 'danger' : 'basic'
    " fullWidth [formControl]="form.get('name')" nbInput size="small" />
        </nb-form-field>
        <div style="width: 100%; margin-bottom: 1rem">
            <nb-checkbox status="success" [formControl]="form.get('notChange')">Not Change</nb-checkbox>
        </div>
        <span *ngIf="level <= 0" style="display: block; margin-bottom: 0.5rem; font-weight: 600" [class.text-danger]="
          form.get('level').invalid &&
          (form.get('level').touched || form.get('level').dirty)
        ">Level <span class="text-danger">*</span></span>
        <nb-form-field *ngIf="level <= 0" style="width: 100%; margin-bottom: 1rem">
            <button nbButton ghost (click)="useMinusLevel()" nbPrefix>
          <nb-icon icon="minus-outline"></nb-icon>
        </button>
            <input style="text-align: center;" readonly [status]="
              form.get('level').invalid &&
              (form.get('level').touched || form.get('level').dirty) ? 'danger' : 'basic'
            " fullWidth [value]="form.get('level').value" nbInput size="small" />
            <button nbButton ghost (click)="usePlusLevel()" nbSuffix>
              <nb-icon icon="plus-outline"></nb-icon>
            </button>
        </nb-form-field>
        <span style="display: block; margin-bottom: 0.5rem; font-weight: 600">Permissions</span
        >
    <div nz-row style="width: 100%;" *ngFor="let permission of permissions">
      <div nz-col [nzXs]="24" [nzSm]="24" [nzMd]="12" [nzLg]="12" [nzXl]="8" class="mb-2" [nzXXl]="8" *ngFor="let item of permission">
        <nb-toggle status="success" [formControl]="form.get(item.value)">{{item.label}}</nb-toggle>
      </div>
    </div>
    <span style="display: block; margin-bottom: 0.5rem; font-weight: 600">Description</span
      >
    <nb-form-field style="width: 100%; margin-bottom: 1rem">
      <textarea
        #area
        placeHolder="Description"
        fullWidth
        [formControl]="form.get('description')"
        (focus)="area.rows = 5"
        rows="1"
        (blur)="area.rows = 1"
        nbInput
      ></textarea>
    </nb-form-field>
</nb-card-body>
<nb-card-footer>
    <button *ngIf="!inside" style="float: right;" status="default" nbButton size="small" (click)="useDialog(cancelRef)">Cancel</button>
    <button style="float: right; margin-right: 0.5rem;" [disabled]="form.invalid" status="primary" (click)="!inside ? useDialog(submitRef) : useSubmit()" nbButton size="small">Save</button>
</nb-card-footer>
</nb-card>
<ng-template #submitRef let-data let-ref="dialogRef">
<nb-card>
    <nb-card-header>Saved changes </nb-card-header>
    <nb-card-body>Are you sure you wish to save and hide modal?</nb-card-body>
    <nb-card-footer class="p-2">
        <button style="float: right" status="primary" nbButton size="small" (click)="useSubmit(ref)">
Save and hide
</button>
        <button style="float: right; margin-right: 0.5rem" status="default" nbButton size="small" (click)="ref.close()">
Continue editing
</button>
    </nb-card-footer>
</nb-card>
</ng-template>
<ng-template #cancelRef let-data let-ref="dialogRef">
<nb-card>
    <nb-card-header>You have unsaved changes </nb-card-header>
    <nb-card-body>Are you sure you wish to hide modal?</nb-card-body>
    <nb-card-footer class="p-2">
        <button style="float: right" status="default" nbButton size="small" (click)="ref.close(); useClose.emit()">
Hide modal
</button>
        <button style="float: right; margin-right: 0.5rem" status="default" nbButton size="small" (click)="ref.close()">
Continue editing
</button>
    </nb-card-footer>
</nb-card>
</ng-template>