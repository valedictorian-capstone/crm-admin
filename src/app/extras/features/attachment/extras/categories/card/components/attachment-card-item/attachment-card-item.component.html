<nb-card class="w-per-95 m-auto">
    <nb-card-header>
        <nb-checkbox (checkedChange)="control.setValue($event); useItemCheck.emit()" class="float-left display-flex align-items-center" style="height: 2rem;"></nb-checkbox>
        <button class="float-right ml-1" (click)="show = !show" outline nbButton size="small">
          <nb-icon [icon]="show ? 'arrow-down'  : 'arrow-left' + '-outline'"></nb-icon>
        </button>
    </nb-card-header>
    <nb-card-body *ngIf="show">
        <b><nb-icon icon="attach-outline"></nb-icon> {{attachment.name}} (Name)</b><br>
        <b><nb-icon icon="options-outline"></nb-icon> {{attachment.size | size}} (Size)</b><br>
        <b *ngIf="isMain"><nb-icon icon="donate" pack="font-awesome"></nb-icon> {{attachment.deal ? attachment.deal.title : 'None'}} (Deal</b><br *ngIf="isMain" />
        <b *ngIf="isMain"><nb-icon icon="gift-outline"></nb-icon> {{attachment.campaign ? attachment.campaign.name : 'None'}} (Campaign)</b><br *ngIf="isMain" /><br>
        <nb-form-field class="w-100">
            <textarea style="background: #ffe498; font-family: monospace, sans-serif;" [value]="attachment.description ? attachment.description : 'None'" rows="7" readonly nbInput status="info" fullWidth></textarea>
        </nb-form-field>
    </nb-card-body>
    <nb-card-footer *ngIf="show">
        <button (click)="useDownload()" class="float-left" nbButton status="success" outline size="small">
        <nb-icon [icon]="'download-outline'"></nb-icon>
    </button>
        <button (click)="useRemove.emit()" class="float-right ml-1" size="small" outline nbButton status="danger">
      <nb-icon icon="trash-2-outline"></nb-icon>
    </button>
        <button (click)="useDialog(editRef)" class="float-right" size="small" outline nbButton status="info">
      <nb-icon icon="edit-2-outline"></nb-icon>
    </button>
    </nb-card-footer>
</nb-card>
<ng-template #editRef let-data let-ref="dialogRef">
    <nb-card class="child" style="position: relative;">
        <ngx-spinner [name]="'attachment-save'" bdColor="#e5e5e5" [style.opacity]="'0.8'" [zIndex]="999" size="medium" color="#3de2ab" type="ball-clip-rotate-multiple" [fullScreen]="false"></ngx-spinner>
        <nb-card-header>
            {{data?.description ? 'Edit' : 'Add'}} attachment description
            <button (click)="ref.close()" style="float:right" nbButton size="tiny">
        <nb-icon icon="close"></nb-icon>
        </button>
        </nb-card-header>
        <nb-card-body>
            <div class="attachment mb-3">
                <div class="extension">
                    <nb-icon [icon]="icon"></nb-icon>
                </div>
                <div class="content">
                    <div class="content-top">
                        <a>{{data?.name}}</a>
                    </div>
                    <div class="content-bottom">
                        <span class="text">{{data?.createdAt | time}}</span>
                        <span class="separator">·</span>
                        <span class="text">Đặng Khánh Vinh</span>
                        <span class="separator">·</span>
                        <span class="text">{{data?.size | size}}</span>
                    </div>
                </div>
            </div>
            <span style="display: block; margin-bottom: 0.5rem; font-weight: 600">Description</span
        >
      <nb-form-field style="width: 100%; margin-bottom: 1rem">
        <textarea
          #area
          placeHolder="Description"
          fullWidth
          [formControl]="description"
          rows="5"
          nbInput
        ></textarea>
      </nb-form-field>
    </nb-card-body>
    <nb-card-footer class="p-2">
        <button style="float: right" status="success" nbButton size="small" (click)="useSave(ref)">
Save
</button>
        <button style="float: right; margin-right: 0.5rem" status="default" nbButton size="small" (click)="ref.close()">
Cancel
</button>
        </nb-card-footer>
</nb-card>
</ng-template>