<nb-card class="h-100 w-100 position-relative">
    <nb-card-header style="padding: 1rem 1rem">
        <span class="display-flex align-items-center float-left h-100">
        <nb-icon icon="donate" pack="font-awesome" class="mr-2"></nb-icon>
        <b style="font: 600 17px/16px monospace, sans-serif; color: #747678">Deal</b>
      </span>
    </nb-card-header>
    <nb-card-body class="p-0">
        <div class="w-100" nz-row>
            <div nz-col [nzXs]="24" [nzSm]="24" [nzMd]="24" [nzLg]="8" [nzXl]="8" [nzXXl]="8">
                <app-deal-information [canUpdate]="state.canUpdate" *ngIf="state.main" [deal]='state.main'></app-deal-information>
                <app-deal-stage [canUpdate]="state.canUpdate" *ngIf="state.main" [deal]='state.main' [selectedStage]="state.main.stage" [selectedPipeline]="state.main.stage.pipeline"></app-deal-stage>
                <app-deal-product [canUpdate]="state.canUpdate" *ngIf="state.main" [deal]='state.main'></app-deal-product>
                <app-deal-assignee [canAssign]="state.canAssign" [you]="state.you" [canGetAssign]="state.canGetAssign" *ngIf="state.main" [deal]='state.main'></app-deal-assignee>
                <app-deal-feedback-assignee [canAssign]="state.canAssign" [you]="state.you" [canGetFeedback]="state.canGetFeedback" *ngIf="state.main" [deal]='state.main'></app-deal-feedback-assignee>
                <app-deal-feedback [canUpdateFeedback]="state.canUpdateFeedback" *ngIf="state.main && state.main.status !== 'processing'" [deal]='state.main'></app-deal-feedback>
                <app-deal-customer [canUpdate]="state.canUpdate" *ngIf="state.main" [deal]='state.main'></app-deal-customer>
                <app-deal-campaign *ngIf="state.main && state.main.campaign" [canAccess]="state.canAccessCampaign" [campaign]='state.main.campaign'></app-deal-campaign>
            </div>
            <div nz-col [nzXs]="24" [nzSm]="24" [nzMd]="24" [nzLg]="16" [nzXl]="16" [nzXXl]="16">
                <app-activity-main [query]="{key: 'deal', id: state.id}" [for]="'deal'" [deal]="state.main"></app-activity-main>
                <app-note-main [query]="{key: 'deal', id: state.id}" [for]="'deal'" [deal]="state.main"></app-note-main>
                <app-attachment-main [query]="{key: 'deal', id: state.id}" [for]="'deal'" [deal]="state.main"></app-attachment-main>
                <app-log-main [query]="{key: 'deal', id: state.id}" [for]="'deal'" [deal]="state.main"></app-log-main>
                <!-- <app-deal-customer></app-deal-customer> -->
            </div>
        </div>
    </nb-card-body>
</nb-card>
