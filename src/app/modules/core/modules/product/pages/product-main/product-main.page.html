<div class="crm-product">
    <div class='crm-product-header'>
        <div class="navigation">
            <button nbButton status="success" (click)="usePlus()" outline class="mr-2" size="small">New Product</button>
            <button nbButton status="primary" (click)="useImport()" outline class="mr-2" size="small">Import</button>
            <button nbButton status="default" (click)="useReload()" class="mr-2" outline size="small">
            <nb-icon icon="sync-outline"></nb-icon>
          </button>
            <button *ngIf="restores.length > 0" nbButton status="default" status="warning" (click)="useDialog(restoreRef)" outline size="small">
            <nb-icon pack="font-awesome" style="font-size: 1rem;" icon="trash-restore"></nb-icon>
          </button>
        </div>
        <div class="filter">
            <nb-form-field class="not-search" style="max-width: 100%; width: 500px; margin-bottom: 1rem;" [nbSpinner]="stage === 'querying'" [nbSpinnerSize]="'tiny'">
                <nb-icon [ngStyle]="{'opacity': stage === 'done' ? '1' : '0'}" nbPrefix icon="search-outline"></nb-icon>
                <input (keyup)="useFilter()" fullWidth [placeholder]="'Search'" shape="rectangle" [(ngModel)]="search" nbInput size="large" />
            </nb-form-field>
        </div>
    </div>
    <div class='crm-product-body'>
        <ngx-spinner [name]="'product-main'" bdColor="transparent" [zIndex]="999" size="medium" color="#3de2ab" type="ball-clip-rotate-multiple" [fullScreen]="false"></ngx-spinner>
        <div nz-row style="width: 90%; margin: auto">
            <div nz-col class="mb-2" [nzXs]="24" [nzSm]="24" [nzMd]="12" [nzLg]="8" [nzXl]="8" [nzXXl]="6" *ngFor="let product of filterProducts">
                <app-product-item [search]="search" [product]="product"></app-product-item>
            </div>
        </div>
    </div>
</div>
<ng-template #restoreRef let-data let-ref="dialogRef">
    <app-product-restore [products]="restores" (useClose)="ref.close()" (useDone)="useRestore($event)"></app-product-restore>
</ng-template>
