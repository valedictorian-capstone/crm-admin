<nb-card class="h-100 w-100 position-relative">
    <ngx-spinner [name]="'product-main'" bdColor="#e5e5e5" [style.opacity]="0.8" [zIndex]="999" size="medium" color="#3de2ab" type="ball-clip-rotate-multiple" [fullScreen]="false"></ngx-spinner>
    <nb-card-header style="padding: 1rem 1rem;">
        <span class="display-flex align-items-center float-left h-100">
  <nb-icon icon="calendar-outline" class="mr-2"></nb-icon>
    <b style="font: 600 17px/16px monospace, sans-serif; color: #747678;">Product</b>
  </span>
        <button class="float-right" (click)="useReload()" outline nbButton size="small">
    <nb-icon icon="sync-outline"></nb-icon>
    </button>
        <button *ngIf="state.restores.length > 0 && state.canRemove" class="float-right mr-1" nbButton status="default" status="warning" (click)="useDialog(restoreRef)" outline size="small">
      <nb-icon pack="font-awesome" style="font-size: 1rem;" icon="trash-restore"></nb-icon>
    </button>
        <button class="float-right mr-1" nz-dropdown [nzDropdownMenu]="productSearch" [nzTrigger]="'click'" [nzPlacement]="'bottomCenter'" [nzBackdrop]="false" outline nbButton status="primary" size="small">
      <nb-icon icon="search-outline"></nb-icon>
      </button>

        <button *ngIf="state.canImport" class="float-right mr-1" (click)="useImport()" status="info" outline nbButton size="small">
        <nb-icon icon="upload" class="display-flex justify-content-center align-items-center" pack="font-awesome"></nb-icon>
        </button>
        <button *ngIf="state.canAdd" class="float-right mr-1" (click)="usePlus()" status="success" outline nbButton size="small">
        <nb-icon icon="plus-outline"></nb-icon>
        </button>
        <nz-dropdown-menu #productSearch="nzDropdownMenu">
            <app-product-search class="display-block" style="margin-left: 1.75rem;" (useSearch)="useSearch($event)" [search]="state.search"></app-product-search>
        </nz-dropdown-menu>
    </nb-card-header>
    <nb-card-body class="p-0">
        <div class="crm-product">
            <div class='crm-product-body'>
                <div nz-row class="w-100">
                    <div nz-col class="mb-2" [nzXs]="24" [nzSm]="24" [nzMd]="12" [nzLg]="8" [nzXl]="8" [nzXXl]="6" *ngFor="let product of state.filterArray">
                        <app-product-item [search]="state.search.value" [canUpdate]="state.canUpdate" [canRemove]="state.canRemove" [product]="product"></app-product-item>
                    </div>
                </div>
            </div>
        </div>
    </nb-card-body>
</nb-card>
<ng-template #restoreRef let-data let-ref="dialogRef">
    <app-product-restore [products]="state.restores" (useClose)="ref.close()" (useDone)="useRestore($event)"></app-product-restore>
</ng-template>